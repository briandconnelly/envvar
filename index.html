<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="envvar makes it easy to set, check, retrieve, transform, and
    validate environment variables.">
<title>Make working with environment variables easier and more consistent • envvar</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Make working with environment variables easier and more consistent">
<meta property="og:description" content="envvar makes it easy to set, check, retrieve, transform, and
    validate environment variables.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">envvar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/briandconnelly/envvar/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="envvar">envvar<a class="anchor" aria-label="anchor" href="#envvar"></a>
</h1></div>
<!-- badges: start -->

<p>Environment variables are a powerful tool that enable your code to react to its environment. However, two common design choices are a frequent source of friction. First, unlike most other “getter”-type functions, functions that retrieve values from environment variable typically fail silently. Because of this, additional code to check whether the environment variable was set are needed. Second, values are almost always returned as strings. This is understandable, but programmers often use environment variables to store a wide variety of data types from numbers to timestamps to URLs. In this case, additional code is required to coerce those strings into their intended format. For frequent users of environment variables, writing all this extra code is unpleasant and time consuming.</p>
<div class="section level2">
<h2 id="failing-loudly">Failing Loudly<a class="anchor" aria-label="anchor" href="#failing-loudly"></a>
</h2>
<p>envvar takes a slightly opinionated perspective to make working with environment variables easier and more consistent. Unless a default value is explicitly given, <code><a href="reference/envvar_get.html">envvar_get()</a></code> raises an error.</p>
<p>For example, let’s say our code depends on an environment variable called <code>NUM_CPUS</code>. In base R, we have to first get the value using <code><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv()</a></code> and then see whether the result is the empty string (not <code>NA</code> like you might expect):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_cpus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"NUM_CPUS"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">num_cpus</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"I need `NUM_CPUS` to be set!"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): I need `NUM_CPUS` to be set!</span></span></code></pre></div>
<p>envvar’s <code><a href="reference/envvar_get.html">envvar_get()</a></code> will just fail if <code>NUM_CPUS</code> isn’t set:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/briandconnelly/envvar" class="external-link">envvar</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/envvar_get.html">envvar_get</a></span><span class="op">(</span><span class="st">"NUM_CPUS"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `envvar_get()`:</span></span>
<span><span class="co">#&gt; ! Environment variable `NUM_CPUS` is not set.</span></span></code></pre></div>
<p>If a reasonable default is known, it can be supplied via the <code>default</code> argument. envvar prints a message, though, so you know that it’s using a default rather than a value specified in the environment.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/envvar_get.html">envvar_get</a></span><span class="op">(</span><span class="st">"NUM_CPUS"</span>, default <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ Environment variable `NUM_CPUS` is not set. Using default value 12.</span></span>
<span><span class="co">#&gt; [1] 12</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="speaking-native-types">Speaking Native Types<a class="anchor" aria-label="anchor" href="#speaking-native-types"></a>
</h2>
<p>Let’s say our <code>NUM_CPUS</code> environment variable is set to 8. Because <code><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv()</a></code> returns strings, we can’t immediately treat it like the integer that it is.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"NUM_CPUS"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; Error in Sys.getenv("NUM_CPUS")/2: non-numeric argument to binary operator</span></span></code></pre></div>
<p>envvar includes several helper functions that return commonly-used data types as their proper type. Here, we’ll use <code><a href="reference/types.html">envvar_get_integer()</a></code> to get <code>NUM_CPUS</code> and return it as an integer.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/types.html">envvar_get_integer</a></span><span class="op">(</span><span class="st">"NUM_CPUS"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>envvar can handle numbers, logical values, version numbers, URLs, timestamps, UUIDs, IP addresses, and more. You can add support for additional data types using <code><a href="reference/envvar_get.html">envvar_get()</a></code>’s <code>transform</code> argument. We’ll work with dates in the next example.</p>
</div>
<div class="section level2">
<h2 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h2>
<p>envvar’s <code>envvar_get</code> functions can also apply validation logic. For this example, let’s set an environment variable called <code>LAUNCH_DATE</code> that absolutely, positively must be in the future. Let’s first set it to a date in the past.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/envvar_set.html">envvar_set</a></span><span class="op">(</span><span class="st">"LAUNCH_DATE"</span> <span class="op">=</span> <span class="st">"1969-07-16"</span><span class="op">)</span></span></code></pre></div>
<p>To read <code>LAUNCH_DATE</code> and ensure that it is in the future, we can supply a <code>validate</code> function to <code><a href="reference/types.html">envvar_get_date()</a></code> that checks the value. If this function returns <code>FALSE</code>, an error is raised.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/types.html">envvar_get_date</a></span><span class="op">(</span><span class="st">"LAUNCH_DATE"</span>, validate <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `envvar_get()`:</span></span>
<span><span class="co">#&gt; ! "1969-07-16" is not a valid value for `LAUNCH_DATE`</span></span></code></pre></div>
<p>Let’s try that again:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/envvar_set.html">envvar_set</a></span><span class="op">(</span><span class="st">"LAUNCH_DATE"</span> <span class="op">=</span> <span class="st">"2028-08-28"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/types.html">envvar_get_date</a></span><span class="op">(</span><span class="st">"LAUNCH_DATE"</span>, validate <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2028-08-28"</span></span></code></pre></div>
<p>Note that the <code>validate</code> argument supports one function. If you’re in need of complex validation, just use a function that encapsulates all of that fanciness.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>envvar is still changing quickly, so it’s not quite ready for CRAN. If you’d like to try out the development version, you can install directly from GitHub:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"briandconnelly/envvar"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="related-packages">Related Packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h2>
<ul>
<li>
<a href="https://github.com/gaborcsardi/dotenv" class="external-link">dotenv</a> package for loading environment variables from <code>.env</code> files</li>
<li>
<a href="https://rstudio.github.io/config/" class="external-link">config</a> package for defining and using multiple environments</li>
<li>
<a href="https://dgkf.github.io/options/" class="external-link">options</a> package for defining and using R package options, another way of adding flexibility to your code</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/briandconnelly/envvar/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/briandconnelly/envvar/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing envvar</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Brian Connelly <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-9948-0379" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=envvar" class="external-link"><img src="https://www.r-pkg.org/badges/version/envvar" alt="CRAN status"></a></li>
<li><a href="https://github.com/briandconnelly/envvar/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/briandconnelly/envvar/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/briandconnelly/envvar?branch=main" class="external-link"><img src="https://codecov.io/gh/briandconnelly/envvar/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brian Connelly.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
